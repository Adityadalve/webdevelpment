IF NOT EXISTS (
    SELECT 1
    FROM sys.tables
    WHERE name = 'transaction'
      AND schema_id = SCHEMA_ID('dbo')
)
BEGIN
    CREATE TABLE dbo.[transaction] (
        transaction_id        VARCHAR(50) NOT NULL,
        [type]                VARCHAR(30),
        extract_date           DATE,
        transaction_datetime   DATETIME2,
        unit                  VARCHAR(30),

        created_ts             DATETIME2 DEFAULT SYSDATETIME(),
        updated_ts             DATETIME2 DEFAULT SYSDATETIME(),

        CONSTRAINT pk_transaction PRIMARY KEY (transaction_id)
    );
END
GO



....


IF NOT EXISTS (
    SELECT 1
    FROM sys.tables
    WHERE name = 'transaction_execution'
      AND schema_id = SCHEMA_ID('dbo')
)
BEGIN
    CREATE TABLE dbo.transaction_execution (
        execution_id        VARCHAR(50) NOT NULL,
        transaction_id      VARCHAR(50) NOT NULL,

        trade_id             VARCHAR(50),
        trade_date           DATE,
        order_start_date     DATE,
        order_end_date       DATE,
        order_status         VARCHAR(30),
        package_trade_id     VARCHAR(50),
        sales_person         VARCHAR(50),
        trader_id            VARCHAR(50),
        trade_status         VARCHAR(30),

        created_ts           DATETIME2 DEFAULT SYSDATETIME(),
        updated_ts           DATETIME2 DEFAULT SYSDATETIME(),

        CONSTRAINT pk_transaction_execution PRIMARY KEY (execution_id),
        CONSTRAINT fk_exec_transaction
            FOREIGN KEY (transaction_id)
            REFERENCES dbo.[transaction](transaction_id)
    );
END
GO


....


